<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>迁移 | 个人博客</title>
    <meta name="description" content="This is a blog example built by VuePress">
    
    
    <link rel="preload" href="/vuepressblog/assets/css/0.styles.782d1301.css" as="style"><link rel="preload" href="/vuepressblog/assets/js/app.34ed5399.js" as="script"><link rel="preload" href="/vuepressblog/assets/js/4.b4e60a56.js" as="script"><link rel="preload" href="/vuepressblog/assets/js/5.437ceeb3.js" as="script"><link rel="preload" href="/vuepressblog/assets/js/45.d36f522e.js" as="script"><link rel="prefetch" href="/vuepressblog/assets/js/1.16f713a9.js"><link rel="prefetch" href="/vuepressblog/assets/js/10.940970eb.js"><link rel="prefetch" href="/vuepressblog/assets/js/11.b539ea55.js"><link rel="prefetch" href="/vuepressblog/assets/js/12.0cfe72b3.js"><link rel="prefetch" href="/vuepressblog/assets/js/13.e03e06a0.js"><link rel="prefetch" href="/vuepressblog/assets/js/14.d51b12fd.js"><link rel="prefetch" href="/vuepressblog/assets/js/15.2f6bd966.js"><link rel="prefetch" href="/vuepressblog/assets/js/16.c821a87b.js"><link rel="prefetch" href="/vuepressblog/assets/js/17.1d39a121.js"><link rel="prefetch" href="/vuepressblog/assets/js/18.b7328a1a.js"><link rel="prefetch" href="/vuepressblog/assets/js/19.def8f7d1.js"><link rel="prefetch" href="/vuepressblog/assets/js/20.af7b2e69.js"><link rel="prefetch" href="/vuepressblog/assets/js/21.baeb5c5c.js"><link rel="prefetch" href="/vuepressblog/assets/js/22.e3ea399c.js"><link rel="prefetch" href="/vuepressblog/assets/js/23.eb03037a.js"><link rel="prefetch" href="/vuepressblog/assets/js/24.b2b8255c.js"><link rel="prefetch" href="/vuepressblog/assets/js/25.d648b024.js"><link rel="prefetch" href="/vuepressblog/assets/js/26.0e3152ba.js"><link rel="prefetch" href="/vuepressblog/assets/js/27.deaabd4e.js"><link rel="prefetch" href="/vuepressblog/assets/js/28.ed1f0893.js"><link rel="prefetch" href="/vuepressblog/assets/js/29.4669c16f.js"><link rel="prefetch" href="/vuepressblog/assets/js/30.8b26e6d0.js"><link rel="prefetch" href="/vuepressblog/assets/js/31.116a34db.js"><link rel="prefetch" href="/vuepressblog/assets/js/32.93e9dbf1.js"><link rel="prefetch" href="/vuepressblog/assets/js/33.14d71321.js"><link rel="prefetch" href="/vuepressblog/assets/js/34.d895ea94.js"><link rel="prefetch" href="/vuepressblog/assets/js/35.b73195c8.js"><link rel="prefetch" href="/vuepressblog/assets/js/36.d6a475e0.js"><link rel="prefetch" href="/vuepressblog/assets/js/37.1d249a16.js"><link rel="prefetch" href="/vuepressblog/assets/js/38.5bfebe3a.js"><link rel="prefetch" href="/vuepressblog/assets/js/39.98d3abdc.js"><link rel="prefetch" href="/vuepressblog/assets/js/40.77362dd9.js"><link rel="prefetch" href="/vuepressblog/assets/js/41.9714a402.js"><link rel="prefetch" href="/vuepressblog/assets/js/42.5c80b8f2.js"><link rel="prefetch" href="/vuepressblog/assets/js/43.8d567d37.js"><link rel="prefetch" href="/vuepressblog/assets/js/44.d6b5729c.js"><link rel="prefetch" href="/vuepressblog/assets/js/46.753217d8.js"><link rel="prefetch" href="/vuepressblog/assets/js/47.5e317be5.js"><link rel="prefetch" href="/vuepressblog/assets/js/48.633080c8.js"><link rel="prefetch" href="/vuepressblog/assets/js/49.59540068.js"><link rel="prefetch" href="/vuepressblog/assets/js/50.c6bac4b3.js"><link rel="prefetch" href="/vuepressblog/assets/js/51.5e9507f2.js"><link rel="prefetch" href="/vuepressblog/assets/js/52.f1b4f07f.js"><link rel="prefetch" href="/vuepressblog/assets/js/53.79627a04.js"><link rel="prefetch" href="/vuepressblog/assets/js/54.7321bb5a.js"><link rel="prefetch" href="/vuepressblog/assets/js/55.81f96300.js"><link rel="prefetch" href="/vuepressblog/assets/js/56.52bdbaf9.js"><link rel="prefetch" href="/vuepressblog/assets/js/57.46b90993.js"><link rel="prefetch" href="/vuepressblog/assets/js/58.bc612a04.js"><link rel="prefetch" href="/vuepressblog/assets/js/59.849c15d9.js"><link rel="prefetch" href="/vuepressblog/assets/js/6.2eb981f1.js"><link rel="prefetch" href="/vuepressblog/assets/js/60.3e5b9b12.js"><link rel="prefetch" href="/vuepressblog/assets/js/61.0d44f6fc.js"><link rel="prefetch" href="/vuepressblog/assets/js/62.04363bf9.js"><link rel="prefetch" href="/vuepressblog/assets/js/63.cca8ee33.js"><link rel="prefetch" href="/vuepressblog/assets/js/64.96e45510.js"><link rel="prefetch" href="/vuepressblog/assets/js/65.63ac4374.js"><link rel="prefetch" href="/vuepressblog/assets/js/66.7ec49135.js"><link rel="prefetch" href="/vuepressblog/assets/js/67.0a87e1f1.js"><link rel="prefetch" href="/vuepressblog/assets/js/68.2c53fc3a.js"><link rel="prefetch" href="/vuepressblog/assets/js/69.ec436606.js"><link rel="prefetch" href="/vuepressblog/assets/js/7.5286a1d0.js"><link rel="prefetch" href="/vuepressblog/assets/js/70.32df5cd4.js"><link rel="prefetch" href="/vuepressblog/assets/js/71.2329802d.js"><link rel="prefetch" href="/vuepressblog/assets/js/72.80b3ff8f.js"><link rel="prefetch" href="/vuepressblog/assets/js/8.fec3f887.js"><link rel="prefetch" href="/vuepressblog/assets/js/9.addd09b9.js"><link rel="prefetch" href="/vuepressblog/assets/js/vuejs-paginate.47274855.js">
    <link rel="stylesheet" href="/vuepressblog/assets/css/0.styles.782d1301.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuperess-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/vuepressblog/" class="nav-link home-link">个人博客
        </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/vuepressblog/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/vuepressblog/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/vuepressblog/" class="nav-link mobile-home-link">个人博客
      </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/vuepressblog/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/vuepressblog/tag/" class="nav-link">Tags</a></li></ul></div></div></div> <div class="content-wrapper"><div id="vuperess-theme-blog__post-layout"><div class="vuepress-blog-theme-content"><div class="content__default"><h1 id="迁移"><a href="#迁移" class="header-anchor">#</a> 迁移</h1> <ul><li><a href="#%E8%BF%81%E7%A7%BB">迁移</a> <ul><li><a href="#%E8%BF%81%E7%A7%BB%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86">迁移的工作原理</a></li> <li><a href="#%E5%88%9B%E5%BB%BA%E6%96%B0%E8%BF%81%E7%A7%BB">创建新迁移</a></li> <li><a href="#%E8%BF%90%E8%A1%8C%E5%92%8C%E8%BF%98%E5%8E%9F%E8%BF%81%E7%A7%BB">运行和还原迁移</a></li> <li><a href="#%E7%94%9F%E6%88%90%E8%BF%81%E7%A7%BB">生成迁移</a></li> <li><a href="#%E4%BD%BF%E7%94%A8%E8%BF%81%E7%A7%BBapi%E7%BC%96%E5%86%99%E8%BF%81%E7%A7%BB">使用迁移API编写迁移</a></li></ul></li></ul> <h2 id="迁移的工作原理"><a href="#迁移的工作原理" class="header-anchor">#</a> 迁移的工作原理</h2> <p>一旦上线生产环境，你将需要将模型更改同步到数据库中。
通常在数据库中获取数据后，使用<code>synchronize：true</code>进行生产模式同步是不安全的。 因此这时候使用迁移，可以解决此类问题。</p> <p>迁移只是一个带有 SQL 查询的文件，用于更新数据库架构并将新更改应用于现有数据库。</p> <p>假设你已经有一个数据库和一个 post 实体：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Entity<span class="token punctuation">,</span> Column<span class="token punctuation">,</span> PrimaryGeneratedColumn <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;typeorm&quot;</span><span class="token punctuation">;</span>

@<span class="token function">Entity</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">Post</span> <span class="token punctuation">{</span>
  @<span class="token function">PrimaryGeneratedColumn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  id<span class="token punctuation">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  @<span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  title<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

  @<span class="token function">Column</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  text<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这些实体在生产环境中运行了几个月而没有任何变化。
数据库中产生了有几千个 posts。</p> <p>现在你需要创建一个新版本并将<code>title</code>重命名为<code>name</code>。
你会怎么做？</p> <p>你需要使用以下 sql 查询（postgres dialect）创建新的迁移：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> <span class="token string">&quot;post&quot;</span> <span class="token keyword">RENAME</span> <span class="token keyword">COLUMN</span> <span class="token string">&quot;title&quot;</span> <span class="token keyword">TO</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>运行此 sql 查询后，你的数据库架构就可以使用新的代码库了。
TypeORM 提供了一个可以编写此类 SQL 查询并在需要时运行它们的位置。
这个位置就叫&quot;migrations&quot;。</p> <h2 id="创建新迁移"><a href="#创建新迁移" class="header-anchor">#</a> 创建新迁移</h2> <p>在创建新迁移之前，你需要正确设置连接选项：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mysql&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;host&quot;</span><span class="token operator">:</span> <span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;port&quot;</span><span class="token operator">:</span> <span class="token number">3306</span><span class="token punctuation">,</span>
  <span class="token property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;database&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;entities&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;entity/*.js&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;migrationsTableName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;custom_migration_table&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;migrations&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;migration/*.js&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;cli&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;migrationsDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;migration&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这里我们设置三个选项：</p> <ul><li><code>&quot;migrationsTableName&quot;: &quot;migrations&quot;</code> - 仅当需要迁移表名称与<code>migrations</code>不同时才指定此选项。</li> <li><code>&quot;migrations&quot;: [&quot;migration/*.js&quot;]</code> - 表示 typeorm 必须从给定的&quot;migration&quot;目录加载迁移。</li> <li><code>&quot;cli&quot;: { &quot;migrationsDir&quot;: &quot;migration&quot; }</code> - 表示 CLI 必须在&quot;migration&quot;目录中创建新的迁移。</li></ul> <p>设置连接选项后，可以使用 CLI 创建新的迁移：</p> <div class="language- extra-class"><pre class="language-text"><code>typeorm migration:create -n PostRefactoring
</code></pre></div><p>要使用 CLI 命令，需要全局安装 typeorm（<code>npm i typeorm -g</code>）。
此外，请确保你本地 typeorm 版本与全局版本匹配。
了解更多有关<a href="/vuepressblog/_posts/typeromdoc/using-cli.html">TypeORM CLI</a>的信息。</p> <p>此处<code>PostRefactoring</code>是迁移的名称 - 你可以指定任何想要的名称。
运行该命令后，可以在&quot;migration&quot;目录中看到一个名为<code>{TIMESTAMP} -PostRefactoring.ts</code>的新文件，其中<code>{TIMESTAMP}</code>是生成迁移时的当前时间戳。
现在你可以打开该文件并在那里添加迁移 sql 查询。</p> <p>你应该可以在迁移中看到以下内容：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MigrationInterface<span class="token punctuation">,</span> QueryRunner <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;typeorm&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">PostRefactoringTIMESTAMP</span> <span class="token keyword">implements</span> <span class="token class-name">MigrationInterface</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">up</span><span class="token punctuation">(</span>queryRunner<span class="token punctuation">:</span> QueryRunner<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">down</span><span class="token punctuation">(</span>queryRunner<span class="token punctuation">:</span> QueryRunner<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>你必须使用两种方法填写迁移代码：<code>up</code>和<code>down</code>。
<code>up</code>必须包含执行迁移所需的代码。
<code>down</code>必须恢复任何<code>up</code>改变。
<code>down</code>方法用于恢复上次迁移。</p> <p>在<code>up</code>和<code>down</code>里面有一个<code>QueryRunner</code>对象。
使用此对象执行所有数据库操作。
了解有关[query runner](./ query-runner.md)的更多信息。</p> <p>让我们通过<code>Post</code>更改看看迁移是什么样的：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MigrationInterface<span class="token punctuation">,</span> QueryRunner <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;typeorm&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">PostRefactoringTIMESTAMP</span> <span class="token keyword">implements</span> <span class="token class-name">MigrationInterface</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">up</span><span class="token punctuation">(</span>queryRunner<span class="token punctuation">:</span> QueryRunner<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ALTER TABLE &quot;post&quot; ALTER COLUMN &quot;title&quot; RENAME TO &quot;name&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">down</span><span class="token punctuation">(</span>queryRunner<span class="token punctuation">:</span> QueryRunner<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ALTER TABLE &quot;post&quot; ALTER COLUMN &quot;name&quot; RENAME TO &quot;title&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 恢复&quot;up&quot;方法所做的事情</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="运行和还原迁移"><a href="#运行和还原迁移" class="header-anchor">#</a> 运行和还原迁移</h2> <p>迁移到生产后，可以使用 CLI 命令运行它们：</p> <div class="language- extra-class"><pre class="language-text"><code>typeorm migration:run
</code></pre></div><p>**<code>typeorm migration：create</code>和<code>typeorm migration：generate</code>将创建<code>.ts</code>文件。 <code>migration：run</code>和<code>migration：revert</code>命令仅适用于<code>.js</code>文件。 因此，在运行命令之前需要编译 typescript 文件。**或者你可以使用<code>ts-node</code>和<code>typeorm</code>来运行<code>.ts</code>迁移文件。</p> <p><code>ts-node</code>的示例：</p> <div class="language- extra-class"><pre class="language-text"><code>ts-node ./node_modules/typeorm/cli.js migration:run
</code></pre></div><p>此命令将执行所有挂起的迁移，并按其时间戳排序的顺序运行它们。
这意味着将在你创建的迁移的<code>up</code>方法中编写的所有 sql 查询都将被执行。
至此你将获得最新的数据库架构。</p> <p>如果由于某种原因你想要还原更改，则可以运行：</p> <div class="language- extra-class"><pre class="language-text"><code>typeorm migration:revert
</code></pre></div><p>该命令将在最近执行的迁移中执行<code>down</code>。
如果需要还原多个迁移，则必须多次调用此命令。</p> <h2 id="生成迁移"><a href="#生成迁移" class="header-anchor">#</a> 生成迁移</h2> <p>当你更改数据库架构时，TypeORM 能够自动生成架构更改的迁移文件。</p> <p>假设你有一个带有<code>title</code>列的<code>Post</code>实体，并且已将名称<code>title</code>更改为<code>name</code>。
则可以运行以下命令：</p> <div class="language- extra-class"><pre class="language-text"><code>typeorm migration:generate -n PostRefactoring
</code></pre></div><p>它将生成一个名为<code>{TIMESTAMP} -PostRefactoring.ts</code>的新迁移，其中包含以下内容：</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MigrationInterface<span class="token punctuation">,</span> QueryRunner <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;typeorm&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">PostRefactoringTIMESTAMP</span> <span class="token keyword">implements</span> <span class="token class-name">MigrationInterface</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">up</span><span class="token punctuation">(</span>queryRunner<span class="token punctuation">:</span> QueryRunner<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ALTER TABLE &quot;post&quot; ALTER COLUMN &quot;title&quot; RENAME TO &quot;name&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">down</span><span class="token punctuation">(</span>queryRunner<span class="token punctuation">:</span> QueryRunner<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> queryRunner<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ALTER TABLE &quot;post&quot; ALTER COLUMN &quot;name&quot; RENAME TO &quot;title&quot;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>瞅瞅，你已经不需要自己编写查询了。
生成迁移的经验法则是，在对模型进行&quot;每次&quot;更改后生成它们。</p> <h2 id="使用迁移api编写迁移"><a href="#使用迁移api编写迁移" class="header-anchor">#</a> 使用迁移API编写迁移</h2> <p>为了使用 API 来更改数据库架构，你可以使用<code>QueryRunner</code>。</p> <p>例如:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MigrationInterface<span class="token punctuation">,</span> QueryRunner<span class="token punctuation">,</span> Table<span class="token punctuation">,</span> TableIndex<span class="token punctuation">,</span> TableColumn<span class="token punctuation">,</span> TableForeignKey <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;typeorm&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">QuestionRefactoringTIMESTAMP</span> <span class="token keyword">implements</span> <span class="token class-name">MigrationInterface</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">up</span><span class="token punctuation">(</span>queryRunner<span class="token punctuation">:</span> QueryRunner<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> queryRunner<span class="token punctuation">.</span><span class="token function">createTable</span><span class="token punctuation">(</span>
      <span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">&quot;question&quot;</span><span class="token punctuation">,</span>
        columns<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span>
            <span class="token keyword">type</span><span class="token punctuation">:</span> <span class="token string">&quot;int&quot;</span><span class="token punctuation">,</span>
            isPrimary<span class="token punctuation">:</span> <span class="token boolean">true</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span>
            <span class="token keyword">type</span><span class="token punctuation">:</span> <span class="token string">&quot;varchar&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token boolean">true</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> queryRunner<span class="token punctuation">.</span><span class="token function">createIndex</span><span class="token punctuation">(</span>
      <span class="token string">&quot;question&quot;</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">TableIndex</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">&quot;IDX_QUESTION_NAME&quot;</span><span class="token punctuation">,</span>
        columnNames<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> queryRunner<span class="token punctuation">.</span><span class="token function">createTable</span><span class="token punctuation">(</span>
      <span class="token keyword">new</span> <span class="token class-name">Table</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">&quot;answer&quot;</span><span class="token punctuation">,</span>
        columns<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span>
            <span class="token keyword">type</span><span class="token punctuation">:</span> <span class="token string">&quot;int&quot;</span><span class="token punctuation">,</span>
            isPrimary<span class="token punctuation">:</span> <span class="token boolean">true</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span>
            <span class="token keyword">type</span><span class="token punctuation">:</span> <span class="token string">&quot;varchar&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token boolean">true</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> queryRunner<span class="token punctuation">.</span><span class="token function">addColumn</span><span class="token punctuation">(</span>
      <span class="token string">&quot;answer&quot;</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">TableColumn</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">&quot;questionId&quot;</span><span class="token punctuation">,</span>
        <span class="token keyword">type</span><span class="token punctuation">:</span> <span class="token string">&quot;int&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> queryRunner<span class="token punctuation">.</span><span class="token function">createForeignKey</span><span class="token punctuation">(</span>
      <span class="token string">&quot;answer&quot;</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">TableForeignKey</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        columnNames<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;questionId&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        referencedColumnNames<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        referencedTableName<span class="token punctuation">:</span> <span class="token string">&quot;question&quot;</span><span class="token punctuation">,</span>
        onDelete<span class="token punctuation">:</span> <span class="token string">&quot;CASCADE&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">async</span> <span class="token function">down</span><span class="token punctuation">(</span>queryRunner<span class="token punctuation">:</span> QueryRunner<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> table <span class="token operator">=</span> <span class="token keyword">await</span> queryRunner<span class="token punctuation">.</span><span class="token function">getTable</span><span class="token punctuation">(</span><span class="token string">&quot;question&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> foreignKey <span class="token operator">=</span> table<span class="token punctuation">.</span>foreignKeys<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">fk</span> <span class="token operator">=&gt;</span> fk<span class="token punctuation">.</span>columnNames<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&quot;questionId&quot;</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> queryRunner<span class="token punctuation">.</span><span class="token function">dropForeignKey</span><span class="token punctuation">(</span><span class="token string">&quot;question&quot;</span><span class="token punctuation">,</span> foreignKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> queryRunner<span class="token punctuation">.</span><span class="token function">dropColumn</span><span class="token punctuation">(</span><span class="token string">&quot;question&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;questionId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> queryRunner<span class="token punctuation">.</span><span class="token function">dropTable</span><span class="token punctuation">(</span><span class="token string">&quot;answer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> queryRunner<span class="token punctuation">.</span><span class="token function">dropIndex</span><span class="token punctuation">(</span><span class="token string">&quot;question&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;IDX_QUESTION_NAME&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">await</span> queryRunner<span class="token punctuation">.</span><span class="token function">dropTable</span><span class="token punctuation">(</span><span class="token string">&quot;question&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">getDatabases</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><p>返回所有可用的数据库名称，包括系统数据库。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">getSchemas</span><span class="token punctuation">(</span>database<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>database</code> - 如果指定了 database 参数，则返回该数据库的模式</li></ul> <p>返回所有可用的模式名称，包括系统模式。 仅对 SQLServer 和 Postgres 有用。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">getTable</span><span class="token punctuation">(</span>tableName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Table<span class="token operator">|</span>undefined<span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>tableName</code> -要加载的表的名称</li></ul> <p>从数据库中按给定名称加载表。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">getTables</span><span class="token punctuation">(</span>tableNames<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Table<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>tableNames</code> - 要加载的表的名称</li></ul> <p>从数据库中按给定名称加载表。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">hasDatabase</span><span class="token punctuation">(</span>database<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>database</code> - 要检查的数据库的名称</li></ul> <p>检查是否存在具有给定名称的数据库。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">hasSchema</span><span class="token punctuation">(</span>schema<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>schema</code> - 要检查的模式的名称</li></ul> <p>检查是否存在具有给定名称的模式。 仅用于 SqlServer 和 Postgres。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">hasTable</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li></ul> <p>检查表是否存在。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">hasColumn</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> columnName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>columnName</code> - 要检查的列的名称</li></ul> <p>检查表中是否存在列。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">createDatabase</span><span class="token punctuation">(</span>database<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> ifNotExist<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>database</code> - 数据库名称</li> <li><code>ifNotExist</code> - 如果为'true`则跳过创建，否则如果数据库已存在则抛出错误</li></ul> <p>创建一个新数据库。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">dropDatabase</span><span class="token punctuation">(</span>database<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> ifExist<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>database</code> - 数据库名称</li> <li><code>ifExist</code> - 如果为<code>true</code>则跳过删除，否则如果找不到数据库则抛出错误</li></ul> <p>删除数据库。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">createSchema</span><span class="token punctuation">(</span>schemaPath<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> ifNotExist<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>schemaPath</code> - 架构名称。 对于 SqlServer，可以接受模式路径（例如'dbName.schemaName'）作为参数。
   如果传递了架构路径，它将在指定的数据库中创建架构</li> <li><code>ifNotExist</code> - 如果为<code>true</code>则跳过创建，否则如果 schema 已存在则抛出错误</li></ul> <p>创建一个新的表模式。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">dropSchema</span><span class="token punctuation">(</span>schemaPath<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> ifExist<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> isCascade<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>schemaPath</code> - 架构名称。 对于 SqlServer，可以接受模式路径（例如'dbName.schemaName'）作为参数。
   如果传递了架构路径，它将删除指定数据库中的架构</li> <li><code>ifExist</code> - 如果为<code>true</code>则跳过删除，否则如果找不到模式则抛出错误</li> <li><code>isCascade</code> - 如果为<code>true</code>，则自动删除模式中包含的对象（表，函数等）。
仅在 Postgres 中使用。</li></ul> <p>删除表架构。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">createTable</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token punctuation">,</span> ifNotExist<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> createForeignKeys<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> createIndices<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象。</li> <li><code>ifNotExist</code> - 如果<code>true</code>则跳过创建，否则如果表已经存在则抛出错误。 默认<code>false</code></li> <li><code>createForeignKeys</code> - 指示是否将在创建表时创建外键。 默认为<code>true</code></li> <li><code>createIndices</code> - 指示是否将在创建表时创建索引。 默认为<code>true</code></li></ul> <p>创建一个新表。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">dropTable</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> ifExist<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> dropForeignKeys<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> dropIndices<span class="token operator">?</span><span class="token punctuation">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 要删除的表对象或表名</li> <li><code>ifExist</code> - 如果<code>true</code>则跳过，否则抛出错误，如果表不存在则抛出错误</li> <li><code>dropForeignKeys</code> - 表示删除表时是否删除外键。 默认为<code>true</code></li> <li><code>dropIndices</code> - 指示删除表时是否删除索引。 默认为<code>true</code></li></ul> <p>删除一张表。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">renameTable</span><span class="token punctuation">(</span>oldTableOrName<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> newTableName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>oldTableOrName</code> - 旧的表对象或要重命名的名称</li> <li><code>newTableName</code> - 新表名</li></ul> <p>重命名一张表。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">addColumn</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> column<span class="token punctuation">:</span> TableColumn<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>column</code> - 新列</li></ul> <p>添加一个新列。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">addColumns</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> columns<span class="token punctuation">:</span> TableColumn<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>columns</code> - 新列</li></ul> <p>添加一个新列。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">renameColumn</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> oldColumnOrName<span class="token punctuation">:</span> TableColumn<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> newColumnOrName<span class="token punctuation">:</span> TableColumn<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>oldColumnOrName</code> - 旧列。接受 TableColumn 对象或列名称</li> <li><code>newColumnOrName</code> - 新列。接受 TableColumn 对象或列名称</li></ul> <p>重命名一列。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">changeColumn</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> oldColumn<span class="token punctuation">:</span> TableColumn<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> newColumn<span class="token punctuation">:</span> TableColumn<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>oldColumn</code> - 旧列。 接受 TableColumn 对象或列名称</li> <li><code>newColumn</code> - 新列。 接受 TableColumn 对象</li></ul> <p>更改表中的列。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">changeColumns</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> changedColumns<span class="token punctuation">:</span> <span class="token punctuation">{</span> oldColumn<span class="token punctuation">:</span> TableColumn<span class="token punctuation">,</span> newColumn<span class="token punctuation">:</span> TableColumn <span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>changedColumns</code> - 更改列的数组
<ul><li><code>oldColumn</code> - 旧的 TableColumn 对象</li> <li><code>newColumn</code> - 新的 TableColumn 对象</li></ul></li></ul> <p>更改表中的列。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">dropColumn</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> column<span class="token punctuation">:</span> TableColumn<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>column</code> - 要删除的 TableColumn 对象或列名称</li></ul> <p>删除表中的列。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">dropColumns</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> columns<span class="token punctuation">:</span> TableColumn<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>columns</code> - 要删除的 TableColumn 对象数组</li></ul> <p>删除表中的列。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">createPrimaryKey</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> columnNames<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>columnNames</code> - 列名称的数组将是主要的</li></ul> <p>创建一个新的主键。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">updatePrimaryKeys</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> columns<span class="token punctuation">:</span> TableColumn<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>columns</code> - 将更新的 TableColumn 对象数组</li></ul> <p>更新复合主键。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">dropPrimaryKey</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li></ul> <p>删除主键。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">createUniqueConstraint</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> uniqueConstraint<span class="token punctuation">:</span> TableUnique<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>uniqueConstraint</code> - 要创建的 TableUnique 对象</li></ul> <p>创建新的唯一约束。</p> <blockquote><p>注意：不适用于 MySQL，因为 MySQL 将唯一约束存储为唯一索引。 请改用<code>createIndex()</code>方法。</p></blockquote> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">createUniqueConstraints</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> uniqueConstraints<span class="token punctuation">:</span> TableUnique<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>uniqueConstraints</code> - 表对象或名称</li></ul> <p>创建新的唯一约束。</p> <blockquote><p>注意：不适用于 MySQL，因为 MySQL 将唯一约束存储为唯一索引。 请改用<code>createIndices()</code>方法。</p></blockquote> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">dropUniqueConstraint</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> uniqueOrName<span class="token punctuation">:</span> TableUnique<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>uniqueOrName</code> - 要删除的 TableUnique 对象或唯一约束名称</li></ul> <p>删除一个唯一约束。</p> <blockquote><p>注意：不适用于 MySQL，因为 MySQL 将唯一约束存储为唯一索引。 请改用<code>dropIndex()</code>方法。</p></blockquote> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">dropUniqueConstraints</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> uniqueConstraints<span class="token punctuation">:</span> TableUnique<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>uniqueConstraints</code> - 要删除的 TableUnique 对象的数组</li></ul> <p>删除一个唯一约束。</p> <blockquote><p>注意：不适用于 MySQL，因为 MySQL 将唯一约束存储为唯一索引。 请改用<code>dropIndices()</code>方法。</p></blockquote> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">createCheckConstraint</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> checkConstraint<span class="token punctuation">:</span> TableCheck<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>checkConstraint</code> - TableCheck 对象</li></ul> <p>创建新的检查约束。</p> <blockquote><p>注意：MySQL 不支持检查约束。</p></blockquote> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">createCheckConstraints</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> checkConstraints<span class="token punctuation">:</span> TableCheck<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>checkConstraints</code> - TableCheck 对象的数组</li></ul> <p>创建新的检查约束。</p> <blockquote><p>注意：MySQL 不支持检查约束。</p></blockquote> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">dropCheckConstraint</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> checkOrName<span class="token punctuation">:</span> TableCheck<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>checkOrName</code> - TableCheck 对象或检查约束名称</li></ul> <p>删除检查约束。</p> <blockquote><p>注意：MySQL 不支持检查约束。</p></blockquote> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">dropCheckConstraints</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> checkConstraints<span class="token punctuation">:</span> TableCheck<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>checkConstraints</code> - TableCheck 对象的数组</li></ul> <p>删除检查约束。</p> <blockquote><p>注意：MySQL 不支持检查约束。</p></blockquote> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">createForeignKey</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> foreignKey<span class="token punctuation">:</span> TableForeignKey<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>foreignKey</code> - TableForeignKey 对象</li></ul> <p>创建一个新的外键。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">createForeignKeys</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> foreignKeys<span class="token punctuation">:</span> TableForeignKey<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>foreignKeys</code> - TableForeignKey 对象的数组</li></ul> <p>创建一个新的外键。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">dropForeignKey</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> foreignKeyOrName<span class="token punctuation">:</span> TableForeignKey<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>foreignKeyOrName</code> - TableForeignKey 对象或外键名称</li></ul> <p>删除一个外键。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">dropForeignKeys</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> foreignKeys<span class="token punctuation">:</span> TableForeignKey<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>foreignKeys</code> - TableForeignKey 对象的数组</li></ul> <p>删除一个外键。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">createIndex</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> index<span class="token punctuation">:</span> TableIndex<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>index</code> - TableIndex 对象</li></ul> <p>创建一个新索引。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">createIndices</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> indices<span class="token punctuation">:</span> TableIndex<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>indices</code> - TableIndex 对象的数组</li></ul> <p>创建一个新索引。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">dropIndex</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> index<span class="token punctuation">:</span> TableIndex<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>index</code> - TableIndex 对象或索引名称</li></ul> <p>删除索引。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">dropIndices</span><span class="token punctuation">(</span>table<span class="token punctuation">:</span> Table<span class="token operator">|</span><span class="token builtin">string</span><span class="token punctuation">,</span> indices<span class="token punctuation">:</span> TableIndex<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>table</code> - 表对象或名称</li> <li><code>indices</code> - TableIndex 对象的数组</li></ul> <p>删除指数。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">clearTable</span><span class="token punctuation">(</span>tableName<span class="token punctuation">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><ul><li><code>tableName</code> - 表明</li></ul> <p>清除所有表内容。</p> <blockquote><p>注意：此操作使用 SQL 的 TRUNCATE 查询，该查询无法在事务中恢复。</p></blockquote> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">enableSqlMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span>
</code></pre></div><p>启用特殊查询运行程序模式，其中不执行 sql 查询，而是将它们存储到查询运行程序内的特殊变量中。</p> <p>你可以使用<code>getMemorySql()</code>方法获得内存中的 sql。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">disableSqlMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span>
</code></pre></div><p>禁用不执行 sql 查询的特殊查询运行程序模式。 以前存储的 sql 将被刷新。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">clearSqlMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span>
</code></pre></div><p>刷新所有内存中的 sqls。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">getMemorySql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> SqlInMemory
</code></pre></div><ul><li>返回带有<code>upQueries</code>和<code>downQueries</code>squls 数组的<code>SqlInMemory</code>对象</li></ul> <p>获取存储在内存中的 sql。 sql 中的参数已被替换。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">executeMemoryUpSql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><p>执行内存中的 SQL 查询。</p> <hr> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">executeMemoryDownSql</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span>
</code></pre></div><p>执行内存中的 SQL 查询。</p> <hr></div> <hr> <!----></div> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h2 active"><a href="#迁移的工作原理" title="迁移的工作原理">迁移的工作原理</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#创建新迁移" title="创建新迁移">创建新迁移</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#运行和还原迁移" title="运行和还原迁移">运行和还原迁移</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#生成迁移" title="生成迁移">生成迁移</a></div><div class="vuepress-toc-item vuepress-toc-h2"><a href="#使用迁移api编写迁移" title="使用迁移API编写迁移">使用迁移API编写迁移</a></div></div></div></div> <footer class="footer" data-v-0d113134><div class="footer-left-wrap" data-v-0d113134><ul class="contact" data-v-0d113134><li class="contact-item" data-v-0d113134><a href="https://github.com/ulivz" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-0d113134><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github" data-v-0d113134><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" data-v-0d113134></path></svg>
          
        </a></li><li class="contact-item" data-v-0d113134><a href="https://twitter.com/_ulivz" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-0d113134><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter" data-v-0d113134><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z" data-v-0d113134></path></svg>
          
        </a></li></ul></div> <div class="footer-right-wrap" data-v-0d113134><ul class="copyright" data-v-0d113134><li class="copyright-item" data-v-0d113134><a href="https://policies.google.com/privacy?hl=en-US" target="_blank" rel="noopener noreferrer" class="nav-link external" data-v-0d113134>Privacy Policy</a></li><li class="copyright-item" data-v-0d113134><a href="/vuepressblog/2021/04/20/migrations/.html" class="nav-link" data-v-0d113134>MIT Licensed | Copyright © 2018-present Vue.js</a></li></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/vuepressblog/assets/js/app.34ed5399.js" defer></script><script src="/vuepressblog/assets/js/4.b4e60a56.js" defer></script><script src="/vuepressblog/assets/js/5.437ceeb3.js" defer></script><script src="/vuepressblog/assets/js/45.d36f522e.js" defer></script>
  </body>
</html>
